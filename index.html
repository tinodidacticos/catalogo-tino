<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>CAT√ÅLOGO TINO ¬∑ Lista de Precios Noviembre 2025</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    :root{
      --bg:#111827;
      --card:#1f2937;
      --accent:#10b981;
      --accent-soft:rgba(16,185,129,.15);
      --text:#f9fafb;
      --muted:#9ca3af;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      background:radial-gradient(circle at top,#111827 0,#020617 55%);
      color:var(--text);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .wrap{
      width:100%;
      max-width:1100px;
      padding:12px;
    }
    header{
      text-align:center;
      margin-bottom:8px;
    }
    header h1{
      font-size:1.1rem;
      letter-spacing:.08em;
      text-transform:uppercase;
      color:var(--muted);
      margin-bottom:4px;
    }
    header h2{
      font-size:1.6rem;
      font-weight:700;
    }
    header p{
      font-size:.9rem;
      color:var(--muted);
      margin-top:4px;
    }
    .viewer-card{
      background:var(--card);
      border-radius:18px;
      box-shadow:0 18px 45px rgba(0,0,0,.55);
      padding:12px;
      border:1px solid #374151;
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .toolbar{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      align-items:center;
      justify-content:space-between;
      padding:4px 6px 0;
    }
    .left-controls,
    .right-controls{
      display:flex;
      align-items:center;
      gap:6px;
      flex-wrap:wrap;
    }
    button{
      border:none;
      border-radius:999px;
      padding:6px 10px;
      background:rgba(15,23,42,.8);
      color:var(--text);
      font-size:.8rem;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:4px;
      transition:.15s;
      border:1px solid #1f2937;
    }
    button:hover{
      background:var(--accent-soft);
      border-color:var(--accent);
    }
    button[disabled]{
      opacity:.4;
      cursor:not-allowed;
      background:#111827;
    }
    .badge{
      background:rgba(15,23,42,.9);
      border-radius:999px;
      padding:4px 10px;
      font-size:.75rem;
      color:var(--muted);
      display:inline-flex;
      align-items:center;
      gap:4px;
      border:1px solid #1f2937;
    }
    .badge strong{
      color:var(--accent);
    }

    .canvas-wrap{
      background:#0b1120;
      border-radius:14px;
      padding:10px;
      display:flex;
      justify-content:center;
      align-items:center;
      overflow:auto;
      max-height:75vh;
    }
    canvas{
      max-width:100%;
      height:auto;
      border-radius:8px;
      box-shadow:0 10px 25px rgba(0,0,0,.6);
      background:#111827;
      /* para animaci√≥n */
      transition:transform .3s ease, opacity .3s ease;
    }

    /* Animaciones simples de ‚Äúpasar p√°gina‚Äù */
    .flip-next{
      animation: flipNext .35s ease;
    }
    .flip-prev{
      animation: flipPrev .35s ease;
    }
    @keyframes flipNext{
      0% { transform:translateX(0); opacity:1; }
      40%{ transform:translateX(-28px); opacity:.35; }
      100%{ transform:translateX(0); opacity:1; }
    }
    @keyframes flipPrev{
      0% { transform:translateX(0); opacity:1; }
      40%{ transform:translateX(28px); opacity:.35; }
      100%{ transform:translateX(0); opacity:1; }
    }

    .note{
      font-size:.72rem;
      color:var(--muted);
      text-align:right;
      margin-top:-4px;
      padding:0 4px 2px;
    }
    @media (max-width:640px){
      header h2{font-size:1.4rem;}
      .canvas-wrap{max-height:70vh;}
    }

    /* Bot√≥n flotante de WhatsApp */
    .whatsapp-btn{
      position:fixed;
      right:16px;
      bottom:16px;
      background:#22c55e;
      color:#f9fafb;
      border-radius:999px;
      padding:10px 14px;
      font-size:.85rem;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      gap:6px;
      box-shadow:0 8px 20px rgba(0,0,0,.45);
      border:1px solid rgba(22,163,74,.9);
      z-index:40;
    }
    .whatsapp-btn span.icon{
      font-size:1.1rem;
      line-height:1;
    }
    .whatsapp-btn:hover{
      filter:brightness(1.07);
      transform:translateY(-1px);
    }
  </style>

  <!-- PDF.js desde CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
</head>
<body>

<div class="wrap">
  <header>
    <!-- üîÅ SOLO CAMBIAR EL TEXTO MES A MES -->
    <h1>CAT√ÅLOGO TINO</h1>
    <h2>Lista de Precios Noviembre 2025</h2>
    <p>Us√° las flechas, el toque o el zoom para recorrer el cat√°logo como si fuera una revista.</p>
  </header>

  <div class="viewer-card">
    <div class="toolbar">
      <div class="left-controls">
        <button id="prevPage">‚üµ Anterior</button>
        <button id="nextPage">Siguiente ‚ü∂</button>
        <span class="badge">
          P√°gina <strong id="pageNum">1</strong> / <span id="pageCount">?</span>
        </span>
      </div>

      <div class="right-controls">
        <button id="zoomOut">‚àí</button>
        <span class="badge">Zoom <strong id="zoomLevel">100%</strong></span>
        <button id="zoomIn">+</button>
      </div>
    </div>

    <div class="note">
      Tip: en el celu pod√©s deslizar a izquierda/derecha para cambiar de p√°gina.
    </div>

    <div class="canvas-wrap" id="canvasWrap">
      <canvas id="pdfCanvas"></canvas>
    </div>
  </div>
</div>

<!-- Bot√≥n flotante de WhatsApp -->
<a class="whatsapp-btn"
   href="https://wa.me/542396433691"
   target="_blank"
   rel="noopener">
  <span class="icon">üí¨</span>
  <span>WhatsApp TINO</span>
</a>

<script>
  // üîÅ SIEMPRE QUE EL PDF SE LLAME catalogo.pdf, NO TOCAR ESTO.
  const PDF_FILE  = 'catalogo.pdf';

  const pdfjsLib = window['pdfjsLib'];
  pdfjsLib.GlobalWorkerOptions.workerSrc =
    'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js';

  let pdfDoc = null;
  let pageNum = 1;
  let scale = 1.1; // Zoom inicial
  const canvas = document.getElementById('pdfCanvas');
  const ctx = canvas.getContext('2d');
  const canvasWrap = document.getElementById('canvasWrap');

  const pageNumSpan = document.getElementById('pageNum');
  const pageCountSpan = document.getElementById('pageCount');
  const zoomLevelSpan = document.getElementById('zoomLevel');

  const prevBtn = document.getElementById('prevPage');
  const nextBtn = document.getElementById('nextPage');
  const zoomInBtn = document.getElementById('zoomIn');
  const zoomOutBtn = document.getElementById('zoomOut');

  function playFlip(direction){
    canvas.classList.remove('flip-next','flip-prev');
    // forzar reflow para reiniciar animaci√≥n
    void canvas.offsetWidth;
    canvas.classList.add(direction === 'next' ? 'flip-next' : 'flip-prev');
  }

  function renderPage(num, direction) {
    if(direction) playFlip(direction);

    pdfDoc.getPage(num).then(function (page) {
      const viewport = page.getViewport({ scale: scale });

      canvas.height = viewport.height;
      canvas.width = viewport.width;

      const renderContext = {
        canvasContext: ctx,
        viewport: viewport
      };

      page.render(renderContext);

      pageNumSpan.textContent = num;
      zoomLevelSpan.textContent = Math.round(scale * 100) + '%';

      prevBtn.disabled = (num <= 1);
      nextBtn.disabled = (num >= pdfDoc.numPages);
    });
  }

  function queueRenderPage(num, direction) {
    if (num < 1 || num > pdfDoc.numPages) return;
    pageNum = num;
    renderPage(pageNum, direction);
  }

  // Controles de botones
  prevBtn.addEventListener('click', function () {
    queueRenderPage(pageNum - 1, 'prev');
  });

  nextBtn.addEventListener('click', function () {
    queueRenderPage(pageNum + 1, 'next');
  });

  zoomInBtn.addEventListener('click', function () {
    scale = Math.min(scale + 0.15, 3);
    renderPage(pageNum);
  });

  zoomOutBtn.addEventListener('click', function () {
    scale = Math.max(scale - 0.15, 0.4);
    renderPage(pageNum);
  });

  // üëâ Cambiar p√°gina tocando mitad izquierda/derecha del visor
  canvasWrap.addEventListener('click', function (e){
    const rect = canvasWrap.getBoundingClientRect();
    const x = e.clientX - rect.left;
    if(x < rect.width / 2){
      // izquierda = p√°gina anterior
      queueRenderPage(pageNum - 1, 'prev');
    } else {
      // derecha = p√°gina siguiente
      queueRenderPage(pageNum + 1, 'next');
    }
  });

  // üëâ Soporte para swipe en pantallas t√°ctiles
  let touchStartX = null;
  let touchStartY = null;

  canvasWrap.addEventListener('touchstart', function(e){
    const t = e.changedTouches[0];
    touchStartX = t.clientX;
    touchStartY = t.clientY;
  }, {passive:true});

  canvasWrap.addEventListener('touchend', function(e){
    if(touchStartX === null) return;
    const t = e.changedTouches[0];
    const dx = t.clientX - touchStartX;
    const dy = t.clientY - touchStartY;

    // si el gesto es mayormente horizontal
    if(Math.abs(dx) > 30 && Math.abs(dx) > Math.abs(dy)){
      if(dx < 0){
        // swipe hacia la izquierda -> p√°gina siguiente
        queueRenderPage(pageNum + 1, 'next');
      }else{
        // swipe hacia la derecha -> p√°gina anterior
        queueRenderPage(pageNum - 1, 'prev');
      }
    }
    touchStartX = touchStartY = null;
  }, {passive:true});

  // Cargar el PDF
  pdfjsLib.getDocument(PDF_FILE).promise.then(function (pdfDoc_) {
    pdfDoc = pdfDoc_;
    pageCountSpan.textContent = pdfDoc.numPages;
    renderPage(pageNum);
  }).catch(function (err) {
    console.error('Error cargando el PDF:', err);
    alert('No se pudo cargar el cat√°logo. Verific√° el archivo "' + PDF_FILE + '".');
  });
</script>
</body>
</html>
